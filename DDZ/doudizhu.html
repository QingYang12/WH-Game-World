
<html>
	<head>
		<meta charset="GBK"/>
	</head>
	<body>	
		<div   id="DDZDiv" style="width:100%;height:100%;background-image:url('doudizhu_Img/backgrandK.png');" align="center">
			<!-- 欢迎界面 -->
			<div  id="welcomeDiv" style="width:80%;height:80%;display:none;"   align="center">
				
				<div  id="welcome2" style="width:20%;height:28%;background-image:url('doudizhu_Img/welcome2.png');background-size:100% 100%;"   align="center"></div>
				<div  id="welcome1" style="width:34%;height:20%;background-image:url('doudizhu_Img/welcome1.png');background-size:100% 100%;"   align="center"></div>
				<div  id="welcome4" style="width:20%;height:30%;background-image:url('doudizhu_Img/welcome4.png');background-size:100% 100%;"   align="center"></div>
				<div  id="welcome3" style="width:30%;height:20%;background-image:url('doudizhu_Img/welcome3.png');background-size:100% 100%;"   align="center"></div>
				<input type="button"   value="进入游戏" onclick="gameplay();"/>
			</div>
			<!-- 游戏界面 -->
			<div  id="gameDiv"   style="width:80%;height:80%;display:none;" align="center">
				<!-- 人物头像 -->
				<div  id="personC" style="width:10%;height:14%;background-image:url('doudizhu_Img/personC.png');background-size:100% 100%;position:fixed;top:20%;left:5%;"   align="center"></div>
				<div  id="personB" style="width:10%;height:10%;background-image:url('doudizhu_Img/personB.png');background-size:100% 100%;position:fixed;top:20%;right:5%;"   align="center"></div>
				<div  id="personA" style="width:20%;height:26%;background-image:url('doudizhu_Img/personA.png');background-size:100% 100%;position:fixed;bottom:5%;left:10%;"   align="center"></div>
				<!-- 发牌区 -->
				<div  id="back" style="width:10%;height:15%;background-image:url('doudizhu_Img/back.png');background-size:100% 100%;position:fixed;bottom:5%;right:5%;"   align="center"></div>
				<div  id="backa" style="width:10%;height:15%;background-image:url('doudizhu_Img/back.png');background-size:100% 100%;position:fixed;bottom:5%;right:5%;"   align="center"></div>
				<div  id="backaa" style="width:10%;height:15%;background-image:url('doudizhu_Img/back.png');background-size:100% 100%;position:fixed;bottom:5%;right:5%;"   align="center"></div>
				<div  id="backb" style="width:10%;height:15%;background-image:url('doudizhu_Img/back.png');background-size:100% 100%;position:fixed;bottom:5%;right:5%;"   align="center"></div>
				<div  id="backbb" style="width:10%;height:15%;background-image:url('doudizhu_Img/back.png');background-size:100% 100%;position:fixed;bottom:5%;right:5%;"   align="center"></div>
				<div  id="backc" style="width:10%;height:15%;background-image:url('doudizhu_Img/back.png');background-size:100% 100%;position:fixed;bottom:5%;right:5%;"   align="center"></div>
				<div  id="backcc" style="width:10%;height:15%;background-image:url('doudizhu_Img/back.png');background-size:100% 100%;position:fixed;bottom:5%;right:5%;"   align="center"></div>
				
				<div  id="pointer" style="width:10%;height:6%;background-image:url('doudizhu_Img/p.png');background-size:100% 100%;position:fixed;"   align="center"></div>
				<div  id="face" style="width:10%;height:15%;background-image:url('doudizhu_Img/face.png');background-size:100% 100%;position:fixed;top:30%;left:45%;"   align="center"></div>
				<div  id="personAlist_wait" style="width:100%;height:15%;background-size:100% 100%;position:fixed;top:35%;left:30%;z-index:1;"   align="center"></div>
				<div  id="personAlist"      style="width:100%;height:15%;background-size:100% 100%;position:fixed;bottom:15%;left:30%;z-index:1;"   align="center">
					<!--<div  id="1" style="width:10%;height:15%;background-image:url('doudizhu_Img/face.png');background-size:100% 100%;position:fixed;bottom:15%;left:45%;"   align="left">
							A</br>
							<div  id="1" style="width:15%;height:15%;background-image:url('doudizhu_Img/fangpian.png');background-size:100% 100%;"   align="center">
							</div>
					     </div>-->
				</div>
				<!-- 操作栏 -->
				<div  id="personAlist2" style="width:40%;height:5%;position:fixed;bottom:30%;left:30%;z-index:0;"   align="center">
					<input type="button"   value="发牌" onclick="pushcard();"/>
					<input type="button"   value="出牌" onclick="yesCard();"/>
					<input type="button"   value="不要" onclick="notCard();"/>
					<input type="button"   value="test" onclick="test();"/>
					<input type="button"   value="退出" onclick="gowelcome();"/>
				</div>
			</div>
			<!-- 结算界面 -->
			<div  id="accountDiv" style="width:80%;height:80%;display:none;z-index:9999;border:1px solid #F00" align="center">
				<div  id="welcomeDiv" style="width:20%;height:20%;background-image:url('doudizhu_Img/lose.png');background-size:100% 100%;"   align="center"></div>
				<div  id="welcomeDiv" style="width:20%;height:20%;background-image:url('doudizhu_Img/winner1.png');background-size:100% 100%;"   align="center"></div>
				<div  id="welcomeDiv" style="width:20%;height:20%;background-image:url('doudizhu_Img/winner2.png');background-size:100% 100%;"   align="center"></div>
				<div  id="welcomeDiv" style="width:20%;height:20%;background-image:url('doudizhu_Img/winner3.png');background-size:100% 100%;"   align="center"></div>
				<input type="button"   value="继续游戏" onclick="gameplay();"/>
				<input type="button"   value="重新游戏" onclick="gameplay();"/>
			</div>
		</div>
		
	</body>
	<script>
		<!-- 定义说明-->
			/*  
			1.扑克牌元数：4位/0000；1-2位是牌的大小1-13；3-4位是牌的花色1-4/红桃1/黑桃2/梅花3/方片4；大王：zzzz小王：xxxx；
			2.
			3.
			4.
			5.
			*/
		<!-- 声明-->
			//回合控制
			var cyclelist=[{key:"a",value:false,top:"90%",left:"40%"},{key:"b",value:true,top:"35%",left:"85%"},{key:"c",value:true,top:"35%",left:"5%"}]
			var cycleCount=0;
			var cycleNext=true;
			//1.一副新扑克牌
			var newPukeCards=["zzzz","xxxx","0101","0201","0301","0401","0501","0601","0701","0801","0901","1001","1101","1201","1301","0102","0202","0302","0402","0502","0602","0702","0802","0902","1002","1102","1202","1302","0103","0203","0303","0403","0503","0603","0703","0803","0903","1003","1103","1203","1303","0104","0204","0304","0404","0504","0604","0704","0804","0904","1004","1104","1204","1304"];
			//2.打乱后的扑克牌
			var swimPukeCards=[];
			//3.0-53的随机数
			var templist=[];
			//4.A、B、C、三个人的手牌
			var ACards=[];
			var BCards=[];
			var CCards=[];
			//5.已出的桌面上的扑克牌
			var publicShowCards=[];
			//6.上把扑克牌集合
			var tempPukeCards=[];
			//7.待出扑克牌集合
			var waitPukeCards=[];
			
		<!-- 初始化 -->
			loadWelcome();
			cycleControl();
			
		<!-- 加载欢迎界面 -->
			function loadWelcome(){
				document.getElementById("welcomeDiv").style.display="block";
				document.getElementById("gameDiv").style.display="none";
				document.getElementById("accountDiv").style.display="none";
			}
		<!-- 加载游戏界面 -->
			function loadGameplay(){
				document.getElementById("welcomeDiv").style.display="none";
				document.getElementById("gameDiv").style.display="block";
				document.getElementById("accountDiv").style.display="none";
			}
		<!-- 加载结算界面 -->
			function loadAccountscore(){
				document.getElementById("welcomeDiv").style.display="none";
				document.getElementById("gameDiv").style.display="none";
				document.getElementById("accountDiv").style.display="block";
			}
		<!-- 动画 -->
			<!-- 动画洗牌 -->
			function ShuffleCardsFlash(){
				x=0;
				var ShuffleCards1=setInterval(function (){
					x++;
					},10);
				var ShuffleCards2=setInterval(function (){
						//console.log(x);
					},1000);
				var ShuffleCards3=setInterval(function (){
						if(x<100){//洗牌的时间1s
							if(x%4==0){
								document.getElementById("backaa").style.right="15%";
								document.getElementById("backaa").style.bottom="5%";
							}
							if(x%4==1){
								document.getElementById("backaa").style.right="14%";
								document.getElementById("backaa").style.bottom="5%";
							}
							if(x%4==2){
								document.getElementById("backaa").style.right="10%";
								document.getElementById("backaa").style.bottom="5%";
							}
							if(x%4==3){
								document.getElementById("backaa").style.right="8%";
								document.getElementById("backaa").style.bottom="5%";
							}
						}else{
							document.getElementById("backaa").style.right="5%";
							document.getElementById("backaa").style.bottom="5%";
							clearInterval(ShuffleCards1);
							clearInterval(ShuffleCards2);
							clearInterval(ShuffleCards3);
						}
						
					},10);
			}
			<!-- 动画发牌 -->
			function pushcardFlash(){
				document.getElementById("backa").style.right="65%";
				document.getElementById("backa").style.bottom="15%";
				document.getElementById("backb").style.right="15%";
				document.getElementById("backb").style.bottom="70%";
				document.getElementById("backc").style.right="75%";
				document.getElementById("backc").style.bottom="70%";
				x=0;
				var pushs=setInterval(function (){
					x++;
					},10);
				var pushlog=setInterval(function (){
						//console.log(x);
					},1000);
					
				var pushcard3=setInterval(function (){
						if(x<300){
							if(x%4==0){
								document.getElementById("backaa").style.right="25%";
								document.getElementById("backaa").style.bottom="7%";
								document.getElementById("backbb").style.right="10%";
								document.getElementById("backbb").style.bottom="30%";
								document.getElementById("backcc").style.right="35%";
								document.getElementById("backcc").style.bottom="30%";
							}
							if(x%4==1){
								document.getElementById("backaa").style.right="35%";
								document.getElementById("backaa").style.bottom="10%";
								document.getElementById("backbb").style.right="10%";
								document.getElementById("backbb").style.bottom="40%";
								document.getElementById("backcc").style.right="45%";
								document.getElementById("backcc").style.bottom="40%";
							}
							if(x%4==2){
								document.getElementById("backaa").style.right="45%";
								document.getElementById("backaa").style.bottom="12%";
								document.getElementById("backbb").style.right="15%";
								document.getElementById("backbb").style.bottom="50%";
								document.getElementById("backcc").style.right="55%";
								document.getElementById("backcc").style.bottom="50%";
							}
							if(x%4==3){
								document.getElementById("backaa").style.right="55%";
								document.getElementById("backaa").style.bottom="14%";
								document.getElementById("backbb").style.right="15%";
								document.getElementById("backbb").style.bottom="60%";
								document.getElementById("backcc").style.right="65%";
								document.getElementById("backcc").style.bottom="60%";
							}
						}else{
								document.getElementById("backaa").style.right="65%";
								document.getElementById("backaa").style.bottom="15%";
								document.getElementById("backbb").style.right="15%";
								document.getElementById("backbb").style.bottom="70%";
								document.getElementById("backcc").style.right="75%";
								document.getElementById("backcc").style.bottom="70%";
							clearInterval(pushcard3);
							clearInterval(pushlog);
							clearInterval(pushs);
						}
						
					},10);
			}
			<!-- 动画出牌 -->
		<!-- 操作 -->
			<!-- 开始游戏 -->
			function gameplay(){
				loadGameplay();
			}
			<!-- 重新开始 -->
			function restartgameplay(){
				loadGameplay();
			}
			<!-- 继续游戏 -->
			function continuegameplay(){
				loadGameplay();
			}
			function test(){
				loadAccountscore();
			}
			function gowelcome(){
				loadWelcome();
			}
			<!-- 发牌 -->
			function pushcard(){
				//触发洗牌动画
				ShuffleCardsFlash();
				//洗牌
				ShuffleCards();
				//洗牌3s后触发发牌动画
				var t=setTimeout(function (){
						//触发发牌动画
						pushcardFlash();//发牌动画持续3s
						//51张
						//分发牌到ACards BCards CCards
						for(var i=0;i<=50;i++){
							if(i%3==0){
								ACards.push(swimPukeCards[i]);
							}
							if(i%3==1){
								BCards.push(swimPukeCards[i]);
							}
							if(i%3==2){
								CCards.push(swimPukeCards[i]);
							}
							/*if(i==50){
								console.log("ACards:");
								console.log(ACards);
								console.log("ACards:");
								console.log(BCards);
								console.log("ACards:");
								console.log(CCards);
							}*/
						}
						clearTimeout(t);
					},3000);
				//洗牌6s后显示发到手的扑克牌
				var v=setTimeout(function (){
						  var str="";
						  //ACards
						  for(var i=0;i<=ACards.length-1;i++){
							var tempNum=ACards[i].substring(0,2);
							console.log(tempNum);
							var tempHS=ACards[i].substring(2,4);
							console.log(tempHS);
							var tempIndex=i;
							console.log(tempIndex);
							//底纹
							var imp="";
							//显示花色
							var HS="";
							if(tempHS=="01"){
								HS="doudizhu_Img/hongtao.png";
							}else if(tempHS=="02"){
								HS="doudizhu_Img/heitao.png";
							}else if(tempHS=="03"){
								HS="doudizhu_Img/meihua.png";
							}else if(tempHS=="04"){
								HS="doudizhu_Img/fangpian.png";
							}
							//显示数字
							var Num="";
							if(tempNum=="11"){
								Num="J";
							}else if(tempNum=="12"){
								Num="Q";
							}else if(tempNum=="13"){
								Num="K";
							}else if(tempNum!="zz"&&tempNum!="xx"){
								Num=tempNum;
							}
							//显示大小王
							if(tempNum=="zz"){
								imp="doudizhu_Img/joker1.png";
								Num="&nbsp J</br>&nbsp o</br>&nbsp k</br>&nbsp e</br>&nbsp r</br>";
							}else if(tempNum=="xx"){
								imp="doudizhu_Img/joker2.png";
								Num="&nbsp J</br>&nbsp o</br>&nbsp k</br>&nbsp e</br>&nbsp r</br>";
							}else{
								imp="doudizhu_Img/face1.png";
							}
							var x='<div  id="'+tempIndex+'"  onclick="nextpush('+tempIndex+')" ondblclick ="gobackpull('+tempIndex+')"  style="width:10%;height:15%;background-image:url('+imp+');background-size:100% 100%;position:fixed;bottom:15%;left:'+(25+i*3)+'%;z-index:'+i+';"   align="left">'
							+'<span id="N'+tempIndex+'">'+Num+'</br>'
							+'<div  id="H'+tempIndex+'" style="width:15%;height:15%;background-image:url('+HS+');background-size:100% 100%;">'
							+'</div>'
							+'</div>'
							str=str+x;
							
						  }
						  console.log(str);
						  
						  var personAlists=document.getElementById("personAlist");
						  personAlists.innerHTML=str;
						
						
						clearTimeout(v);
					},6000);
				
			}
			<!-- 出牌 -->
			function yesCard(){
				if(ruleCheck()){
					alert("next");
					for(var i=0;i<=waitPukeCards.length-1;i++){
						waitPukeCards[i].style.top="30%"
						publicShowCards.push(waitPukeCards[i]); 
					}
					waitPukeCards=[];
					//下一回合
					for(var i=0;i<=cyclelist.length-1;i++){
						if(cyclelist[i].key=="a"){
							cyclelist[i].value=true;
						}
					}
				}else{
					alert("stop");
				}
			}
			<!-- 选牌 -->
			function nextpush(index){
				//alert("选牌");
				var personAlists=document.getElementById("personAlist");
				var personAlist_wait=document.getElementById("personAlist_wait");
				var thisNode=document.getElementById(index);
				personAlists.removeChild(thisNode);
				waitPukeCards.push(thisNode);
				thisNode.style.bottom="17%";
				personAlist_wait.appendChild(thisNode);
				
			}
			<!-- 退选牌 -->
			function gobackpull(index){
				//alert("退选牌");
				var personAlists=document.getElementById("personAlist");
				var personAlist_wait=document.getElementById("personAlist_wait");
				var thisNode=document.getElementById(index);
				personAlist_wait.removeChild(thisNode);
				thisNode.style.bottom="15%"
				personAlist.appendChild(thisNode);
				waitPukeCards.slice(thisNode);
				//alert(JSON.stringify(waitPukeCards));
			}
			<!-- 不要 -->
		<!-- 游戏内算法 -->
			<!-- 洗牌 -->
			function ShuffleCards(){
				//清空所有集合 初始化
				swimPukeCards=[];
				templist=[];
				ACards=[];
				BCards=[];
				CCards=[];
				publicShowCards=[];
				
				getrandom();//取0-53的随机数
				for(var i=0;i<=templist.length-1;i++){
					swimPukeCards.push(newPukeCards[templist[i]]);
				}
			}
			function getrandom(){
				//0-53的随机数
				var temp=Math.floor(Math.random()*54);//0-53
				for(var i=0;i<=53;i++){
					if(templist[i]==temp){
						return getrandom();
					}
				}
				templist.push(temp);
				if(templist.length==54){
					return templist;
				}else{
					return getrandom();
				}
			}
			<!-- 地主 -->
			<!-- 回合控制 -->
			function cycleControl(){
				var times=setInterval(function (){
								var count=cycleCount%3;
								//指针动画
								document.getElementById("pointer").style.top=cyclelist[count].top;
								document.getElementById("pointer").style.left=cyclelist[count].left;
								console.log(count);
								if(cyclelist[count].value==true){
									//已经出牌，next
									console.log(cyclelist[count].key+":已经出牌了,回合next:"+cyclelist[(count+1)%3].key);
									//cyclelist[count].value=false;//初始化
									if(cyclelist[count].key=="a"){
										cyclelist[count].value=false;//初始化
									}
									cycleCount++;
								}else{
									//未出牌，stop
								}
						},100);
			}
			<!-- 规则校验 -->
			function ruleCheck(){
				var key=false;
				//点击出牌时触发
				if(!tempPukeCards.length>0){
					tempPukeCards.push("0000")
				}
				if(waitPukeCards[0]!=undefined&&waitPukeCards[0]>tempPukeCards[0]){
					/*tempPukeCards[0]=waitPukeCards[0]
					publicShowCards.push(waitPukeCards[0])
					waitPukeCards.slice(0)*/
					key=true;
				}else{
					key=false;
					alert("不符合出牌规则");
				}
				return key
			}
			<!-- 获胜结束判断 -->
			<!-- 分数结算 -->
			<!-- 计数 -->
			
			<!-- AI出牌规则 -->

	</script>



</html>