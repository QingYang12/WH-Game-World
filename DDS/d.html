<!doctype>
<html>
	<head>
		<meta charset="utf8"/>
	</head>
	<body style="background-image:url('beijing.jpg');background-size:100% 100%;">
		<input  type="button" value="begin" onclick="begin()"/>
		<table style="width:100%;height:100%;"  >
			<tr style="width:100%;height:25%;">
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="1" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none"onclick="clickIt(1)"></div>
						<div id="1s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="2" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(2)"></div>
						<div id="2s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="3" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(3)"></div>
						<div id="3s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="4" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(4)"></div>
						<div id="4s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
			</tr>
			<tr style="width:100%;height:25%;">
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="5" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(5)"></div>
						<div id="5s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="6" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(6)"></div>
						<div id="6s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="7" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(7)"></div>
						<div id="7s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="8" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(8)"></div>
						<div id="8s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
			</tr>
			<tr style="width:100%;height:25%;">
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="9" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(9)"></div>
						<div id="9s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="10" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(10)"></div>
						<div id="10s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="11" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(11)"></div>
						<div id="11s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="12" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(12)"></div>
						<div id="12s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
			</tr>
			<tr style="width:100%;height:25%;">
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="13" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(13)"></div>
						<div id="13s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="14" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(14)"></div>
						<div id="14s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="15" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(15)"></div>
						<div id="15s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
				<td >
					<div  style="width:100%;height:100%;background-image:url('dong.png');background-size:100% 100%;">
						<div id="16" style="width:100%;height:100%;background-image:url('mouse.png');background-size:100% 100%;display:none" onclick="clickIt(16)"></div>
						<div id="16s" style="width:100%;height:100%;background-image:url('chuizi.png');background-size:100% 100%;display:none;z-index:9999;"></div>
					</div>
				</td>
			</tr>
		</table>
	</body>
	<script>
		var key=0;
		var count=0;
		var tt;
		var time=1200;
		var it;
		function begin(){
			tt=setInterval(function (){
					console.log("x");
					it=Math.floor(Math.random()*16)+1;//0-16的随机数
					viewIt(it);
					check();
				},time);
		}
		function viewIt(it){
			document.getElementById(it).style.display="block";
			key=it;
		}
		function clickIt(it){
			if(it==key){
				key=0;
				time=time-50//缩短时间
				// 显示锤子
				document.getElementById(it+"s").style.display="block";
				console.log(it+"s");
				// 消除锤子
				var ch=setTimeout(function (){
					document.getElementById(it+"s").style.display="none";
					clearTimeout(ch);
				},200);
				
			}
			document.getElementById(it).style.display="none";
		}
		function check(){
			var bb=setTimeout(function (){
					document.getElementById(it).style.display="none";
					if(key!=0){
						ends();
					}else{
						count++;
					}
					clearTimeout(bb);
				},time-100);
			
		}
		function ends(){
			var end=setTimeout(function (){
						alert("End:"+count);
						initIt();
						clearTimeout(end);
				},500);
		}
		function initIt(){
			clearInterval(tt);
			count=0;
			key=0;
			time=1200;
			document.getElementById(1).style.display="none";
			document.getElementById(2).style.display="none";
			document.getElementById(3).style.display="none";
			document.getElementById(4).style.display="none";
			document.getElementById(5).style.display="none";
			document.getElementById(6).style.display="none";
			document.getElementById(7).style.display="none";
			document.getElementById(8).style.display="none";
			document.getElementById(9).style.display="none";
			document.getElementById(10).style.display="none";
			document.getElementById(11).style.display="none";
			document.getElementById(12).style.display="none";
			document.getElementById(13).style.display="none";
			document.getElementById(14).style.display="none";
			document.getElementById(15).style.display="none";
			document.getElementById(16).style.display="none";
		}
	</script>
</html>